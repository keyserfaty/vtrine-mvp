<html>
<head>
    <title>Pictures</title>
</head>
<body style="margin: 0; overflow: hidden">
<div id='root'></div>
<script>
  function Node(e,t){var r=d.createElement(e);return Object.keys(t).forEach(function(e){r.setAttribute(e,t[e])}),r}var d=document,url="https://api.unsplash.com/photos/?client_id=",clientId="6322e07de0e155ba0d9eca8d67cf27bb9b45417f2feb1a234baa363a1dda3dbe",initialState={list:[],currentImage:0,nextImage:1},createStore=function(e){var t=void 0,r=[];return{dispatch:function(a){t=e(t,a),r.forEach(function(e){return e(t,a)})},getState:function(){return t},subscribe:function(e){r.push(e)}}},reducer=function(e,t){switch("undefined"==typeof e&&(e=initialState),t.type){case"ON_NEW_IMAGES":return Object.assign({},e,{list:[].concat(e.list,t.payload.list)});case"ON_NEXT_IMAGE":return Object.assign({},e,{currentImage:e.nextImage,nextImage:e.nextImage+1});default:return e}},store=createStore(reducer);store.subscribe(function(e,t){var r=d.querySelector("#root"),a=e.list,n=e.currentImage,i=e.nextImage;switch(t.type){case"ON_WINDOW_LOAD":case"ON_FETCH_IMAGES":var s=new XMLHttpRequest;s.addEventListener("load",function(){store.dispatch({type:"ON_NEW_IMAGES",payload:{list:JSON.parse(this.responseText)}})}),s.open("GET",url+clientId),s.send();break;case"ON_NEW_IMAGES":var c=d.querySelectorAll("img");c.forEach(function(e){r.removeChild(e)});var o=Node("img",{id:n,src:a[n].urls.small,style:"width: 100%"}),l=Node("img",{id:i,src:a[i].urls.small,style:"width: 100%; display: none"});r.appendChild(o),r.appendChild(l);break;case"ON_SPACE_BAR":store.dispatch({type:"ON_NEXT_IMAGE"}),n===a.length-2&&store.dispatch({type:"ON_FETCH_IMAGES"});var c=r.querySelectorAll("img"),u=c[0],o=c[1],l=Node("img",{id:i,src:a[i].urls.small,style:"width: 100%; display: none"});r.removeChild(u),o.setAttribute("style","width: 100%;"),r.appendChild(l)}});var body=d.querySelector("body");window.addEventListener("load",function(){store.dispatch({type:"ON_WINDOW_LOAD"})}),body.addEventListener("keyup",function(e){32===e.keyCode&&store.dispatch({type:"ON_SPACE_BAR"})});</script>
</body>
</html>